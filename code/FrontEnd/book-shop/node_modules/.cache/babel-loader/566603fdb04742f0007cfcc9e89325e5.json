{"ast":null,"code":"var _jsxFileName = \"/Users/hughphung/Documents/RMIT/2021/SEPT/SEPT-TEAM/SEPT-Team-6/code/FrontEnd/book-shop/src/components/Book/BookListing.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useState } from 'react';\nimport axios from 'axios';\nimport { useParams } from 'react-router';\nimport { useEffect } from 'react';\nimport { Container, Table } from 'react-bootstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const BookListing = ({\n  bookID\n}) => {\n  _s();\n\n  const [tableDataUsed, setTableDataUsed] = useState([]);\n  const [tableDataNew, setTableDataNew] = useState([]);\n  const [book, setBook] = useState({\n    id: 0\n  });\n  const [dataLoaded, setDataLoaded] = useState(false);\n  const [listings, setListings] = useState();\n\n  const populateData = async request => {\n    try {\n      const config = {\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        },\n        withCredential: true\n      };\n\n      if (request === \"getBook\") {\n        const bookRequest = {\n          id: parseInt(bookID)\n        };\n        console.log(\"Sending book request\");\n        const response = await axios.post(\"http://localhost:8081/api/books/getbook\", bookRequest, config);\n        return response.data;\n      } else if (request === \"getListings\") {\n        const listingRequest = {\n          bookId: parseInt(bookID)\n        };\n        console.log(\"Sending listings request\");\n        const response = await axios.post(\"http://localhost:8082/api/listings/getlistingsbybookid\", listingRequest, config);\n        console.log(\"Got listings\", response.data);\n        return response.data;\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    async function fetchData() {\n      if (dataLoaded === false) {\n        const bookData = await populateData(\"getBook\");\n        const listingsData = await populateData(\"getListings\");\n\n        if (listingsData && bookData) {\n          console.log(\"LISTINSGSOS\", listingsData);\n\n          if (!listingsData.results && !bookData.results) {\n            let dataNew = [];\n            let dataUsed = [];\n\n            for (const listing of listingsData.new) {\n              let listingItem = {\n                id: listing.id,\n                type: listing.type,\n                price: listing.price,\n                sold: listing.sold\n              };\n\n              if (listing.bookId === book.id) {\n                listingItem = { ...listingItem,\n                  title: book.title,\n                  author: book.author\n                };\n                dataNew.push(listingItem);\n              }\n            }\n\n            for (const listing of listingsData.used) {\n              let listingItem = {\n                id: listing.id,\n                type: listing.type,\n                price: listing.price,\n                sold: listing.sold\n              };\n\n              if (listing.bookId === book.id) {\n                listingItem = { ...listingItem,\n                  title: book.title,\n                  author: book.author\n                };\n                dataUsed.push(listingItem);\n              }\n            }\n\n            setTableDataNew(dataNew);\n            setTableDataUsed(dataUsed);\n            setDataLoaded(true);\n          }\n        } else {\n          setBook();\n          setListings();\n          setDataLoaded(true);\n        }\n      }\n    }\n\n    fetchData();\n  }, [dataLoaded, tableDataNew, tableDataUsed, listings, book]);\n\n  if (tableDataUsed || tableDataNew) {\n    const displayTableDataUsed = tableDataUsed.map(listItem => {\n      return /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n          children: listItem.id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: listItem.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: listItem.author\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: listItem.type\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: listItem.price\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 21\n        }, this), listItem.sold ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Sold\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 26\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Not sold\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 26\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 21\n      }, this);\n    });\n    const displayTableDataNew = tableDataNew.map(listItem => {\n      return /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n          children: listItem.id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: listItem.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: listItem.author\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: listItem.type\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: listItem.price\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 21\n        }, this), listItem.sold ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Sold\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 26\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Not sold\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 26\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 21\n      }, this);\n    });\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        children: [/*#__PURE__*/_jsxDEV(Table, {\n          striped: true,\n          bordered: true,\n          hover: true,\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Listing ID \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Title\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Author\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Type\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: displayTableDataNew\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Table, {\n          striped: true,\n          bordered: true,\n          hover: true,\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Listing ID \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Title\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Author\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Type\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: displayTableDataUsed\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        children: [/*#__PURE__*/_jsxDEV(Table, {\n          striped: true,\n          bordered: true,\n          hover: true,\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Listing ID \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Title\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Author\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Type\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 243,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Table, {\n          striped: true,\n          bordered: true,\n          hover: true,\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Listing ID \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Title\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Author\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 261,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Type\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 13\n    }, this);\n  }\n};\n\n_s(BookListing, \"TIqcrMYruKcfZxY1C3sF1i85eq4=\");\n\n_c = BookListing;\n\nvar _c;\n\n$RefreshReg$(_c, \"BookListing\");","map":{"version":3,"sources":["/Users/hughphung/Documents/RMIT/2021/SEPT/SEPT-TEAM/SEPT-Team-6/code/FrontEnd/book-shop/src/components/Book/BookListing.js"],"names":["React","useState","axios","useParams","useEffect","Container","Table","BookListing","bookID","tableDataUsed","setTableDataUsed","tableDataNew","setTableDataNew","book","setBook","id","dataLoaded","setDataLoaded","listings","setListings","populateData","request","config","headers","Accept","withCredential","bookRequest","parseInt","console","log","response","post","data","listingRequest","bookId","error","fetchData","bookData","listingsData","results","dataNew","dataUsed","listing","new","listingItem","type","price","sold","title","author","push","used","displayTableDataUsed","map","listItem","displayTableDataNew"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { useState } from 'react';\nimport axios from 'axios';\nimport { useParams } from 'react-router';\nimport { useEffect } from 'react';\nimport { Container, Table } from 'react-bootstrap';\n\nexport const BookListing = ({bookID}) => {\n    const [tableDataUsed, setTableDataUsed] = useState([]);\n    const [tableDataNew, setTableDataNew] = useState([]);\n\n    const [book, setBook] = useState({id: 0});\n    const [dataLoaded, setDataLoaded] = useState(false);\n    const [listings, setListings] = useState();\n\n    const populateData = async (request) =>\n    {\n        try\n        {\n            const config = \n            {\n              headers: {\n                  Accept: 'application/json',\n                  'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin': '*',\n              },\n              withCredential: true\n            }\n\n            if (request === \"getBook\")\n            {\n                const bookRequest = {\n                    id:parseInt(bookID)\n                }\n    \n                console.log(\"Sending book request\")\n                const response = await axios.post(\"http://localhost:8081/api/books/getbook\", bookRequest, config);\n    \n                return response.data;\n            }\n\n            else if (request === \"getListings\")\n            {\n                const listingRequest = {\n                    bookId:parseInt(bookID)\n                }\n                    \n                console.log(\"Sending listings request\")\n                const response = await axios.post(\"http://localhost:8082/api/listings/getlistingsbybookid\", listingRequest, config);\n                console.log(\"Got listings\", response.data)\n                return response.data;\n            }\n\n        }  catch(error)\n        {\n            console.log(error)\n        }\n    }\n\n    useEffect(() => {\n        async function fetchData(){\n            if (dataLoaded === false) {\n                const bookData = await populateData(\"getBook\");\n                const listingsData = await populateData(\"getListings\");\n\n                if (listingsData && bookData)\n                {\n                    console.log(\"LISTINSGSOS\", listingsData)\n                    if (!listingsData.results && !bookData.results)\n                    {\n                        let dataNew = []\n                        let dataUsed = []\n\n\n                        for(const listing of listingsData.new){\n                            let listingItem = {\n                                id:listing.id,\n                                type:listing.type,\n                                price:listing.price,\n                                sold:listing.sold\n                                \n                            }\n\n                                if(listing.bookId === book.id){\n                                    listingItem = {\n                                        ...listingItem, \n                                        title:book.title,\n                                        author:book.author\n                                    }\n                                    dataNew.push(listingItem)\n                                }\n\n                        }\n\n                        for(const listing of listingsData.used){\n                            let listingItem = {\n                                id:listing.id,\n                                type:listing.type,\n                                price:listing.price,\n                                sold:listing.sold\n                                \n                            }\n\n                                if(listing.bookId === book.id){\n                                    listingItem = {\n                                        ...listingItem, \n                                        title:book.title,\n                                        author:book.author\n                                    }\n                                    dataUsed.push(listingItem)\n                                }\n\n                        }\n\n                        setTableDataNew(dataNew); \n                        setTableDataUsed(dataUsed);  \n\n                        setDataLoaded(true)\n                    } \n                }\n                else\n                {\n                    setBook()\n                    setListings()\n                    setDataLoaded(true)\n                }\n            }\n        }\n        fetchData();\n\n    }, [dataLoaded, tableDataNew, tableDataUsed, listings, book])\n    if (tableDataUsed || tableDataNew)\n    {\n        const displayTableDataUsed = tableDataUsed.map(listItem => \n            {\n                return (\n                    \n                    <tr>\n                    <td>{listItem.id}</td>\n                    <td>{listItem.title}</td>\n                    <td>{listItem.author}</td>\n                    <td>{listItem.type}</td>\n                    <td>{listItem.price}</td>\n                    {\n                        listItem.sold\n                        ?\n                        (<div>\n                            Sold\n                        </div>)\n                        :\n                        (<div>\n                            Not sold\n                        </div>\n                        )\n                    }\n                    </tr>\n                )\n            }\n        )\n        const displayTableDataNew = tableDataNew.map(listItem => \n            {\n                return (\n                    \n                    <tr>\n                    <td>{listItem.id}</td>\n                    <td>{listItem.title}</td>\n                    <td>{listItem.author}</td>\n                    <td>{listItem.type}</td>\n                    <td>{listItem.price}</td>\n                    {\n                        listItem.sold\n                        ?\n                        (<div>\n                            Sold\n                        </div>)\n                        :\n                        (<div>\n                            Not sold\n                        </div>\n                        )\n                    }\n                    </tr>\n                )\n            })\n        \n        return (\n            <div>\n                <Container>\n                    \n                    <Table striped bordered hover>\n                        <thead>\n                            <tr>\n                            <th>Listing ID </th>\n                            <th>Title</th>\n                            <th>Author</th>\n                            <th>Type</th>\n                            <th>Price</th>\n                            <th>Status</th>\n\n                \n                            </tr>\n                        </thead>\n                        <tbody>\n                            {displayTableDataNew}\n                        </tbody>\n\n                    </Table>\n\n                    <Table striped bordered hover>\n                        <thead>\n                            <tr>\n                            <th>Listing ID </th>\n                            <th>Title</th>\n                            <th>Author</th>\n                            <th>Type</th>\n                            <th>Price</th>\n                            <th>Status</th>\n\n                \n                            </tr>\n                        </thead>\n                        <tbody>\n                            {displayTableDataUsed}\n                        </tbody>\n\n                    </Table>\n                </Container>\n            </div>\n        )\n    }\n    else\n    {\n        return (\n            <div>\n            <Container>\n                \n                <Table striped bordered hover>\n                    <thead>\n                        <tr>\n                        <th>Listing ID </th>\n                        <th>Title</th>\n                        <th>Author</th>\n                        <th>Type</th>\n                        <th>Price</th>\n                        <th>Status</th>\n\n            \n                        </tr>\n                    </thead>\n                    <tbody>\n\n                    </tbody>\n\n                </Table>\n\n                <Table striped bordered hover>\n                        <thead>\n                            <tr>\n                            <th>Listing ID </th>\n                            <th>Title</th>\n                            <th>Author</th>\n                            <th>Type</th>\n                            <th>Price</th>\n                            <th>Status</th>\n\n                \n                            </tr>\n                        </thead>\n                        <tbody>\n                            \n                        </tbody>\n\n                    </Table>\n            </Container>\n        </div>\n        )\n    }\n\n}\n\n"]},"metadata":{},"sourceType":"module"}