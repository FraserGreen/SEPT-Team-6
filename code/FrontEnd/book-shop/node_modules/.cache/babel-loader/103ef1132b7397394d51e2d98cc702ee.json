{"ast":null,"code":"var _jsxFileName = \"/Users/hughphung/Documents/RMIT/2021/SEPT/SEPT-TEAM/SEPT-Team-6/code/FrontEnd/book-shop/src/components/Book/BookListing.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useState } from 'react';\nimport axios from 'axios';\nimport { useParams } from 'react-router';\nimport { useEffect } from 'react';\nimport { Container, Table } from 'react-bootstrap';\nimport \"./BookListings.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const BookListing = ({\n  bookID\n}) => {\n  _s();\n\n  const [tableDataUsed, setTableDataUsed] = useState([]);\n  const [tableDataNew, setTableDataNew] = useState([]);\n  const [book, setBook] = useState({\n    id: 0\n  });\n  const [dataLoaded, setDataLoaded] = useState(false);\n  const [listings, setListings] = useState();\n\n  const populateData = async request => {\n    try {\n      const config = {\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        },\n        withCredential: true\n      };\n\n      if (request === \"getBook\") {\n        const bookRequest = {\n          id: parseInt(bookID)\n        };\n        console.log(\"Sending book request\");\n        const response = await axios.post(\"http://localhost:8081/api/books/getbook\", bookRequest, config);\n        return response.data;\n      } else if (request === \"getListings\") {\n        const listingRequest = {\n          bookId: parseInt(bookID)\n        };\n        console.log(\"Sending listings request\");\n        const response = await axios.post(\"http://localhost:8082/api/listings/getlistingsbybookid\", listingRequest, config);\n        console.log(\"Got listings\", response.data);\n        return response.data;\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    async function fetchData() {\n      if (dataLoaded === false) {\n        const bookData = await populateData(\"getBook\");\n        const listingsData = await populateData(\"getListings\");\n\n        if (listingsData && bookData) {\n          console.log(\"LISTINSGSOS\", listingsData);\n\n          if (!listingsData.results && !bookData.results) {\n            let dataNew = [];\n            let dataUsed = [];\n\n            if (listingsData.new) {\n              for (const listing of listingsData.new) {\n                let listingItem = {\n                  id: listing.id,\n                  seller: listing.seller,\n                  type: listing.type,\n                  price: listing.price,\n                  sold: listing.sold\n                };\n\n                if (listing.bookId === bookData.id) {\n                  listingItem = { ...listingItem,\n                    title: bookData.title,\n                    author: bookData.author\n                  };\n                  dataNew.push(listingItem);\n                }\n              }\n            }\n\n            if (listingsData.used) {\n              for (const listing of listingsData.used) {\n                let listingItem = {\n                  id: listing.id,\n                  seller: listing.seller,\n                  type: listing.type,\n                  price: listing.price,\n                  sold: listing.sold\n                };\n\n                if (listing.bookId === bookData.id) {\n                  listingItem = { ...listingItem,\n                    title: bookData.title,\n                    author: bookData.author\n                  };\n                  dataUsed.push(listingItem);\n                }\n              }\n            }\n\n            console.log(\"asndjsabdad\", dataNew);\n            setTableDataNew(dataNew);\n            setTableDataUsed(dataUsed);\n            setDataLoaded(true);\n          }\n        } else {\n          setBook();\n          setListings();\n          setDataLoaded(true);\n        }\n      }\n    }\n\n    fetchData();\n  }, [dataLoaded, tableDataNew, tableDataUsed, listings, book]);\n\n  if (tableDataUsed || tableDataNew) {\n    const displayTableDataUsed = tableDataUsed.map(listItem => {\n      return /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n          children: listItem.id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: listItem.seller\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: listItem.type\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: listItem.price\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 21\n        }, this), listItem.sold ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Sold\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 26\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Not sold\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 26\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 21\n      }, this);\n    });\n    const displayTableDataNew = tableDataNew.map(listItem => {\n      return /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n          children: listItem.id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: listItem.seller\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: listItem.type\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: listItem.price\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 21\n        }, this), listItem.sold ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Sold\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 26\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Not sold\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 26\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 21\n      }, this);\n    });\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tableList\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"New Books for Sale\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Table, {\n            striped: true,\n            bordered: true,\n            hover: true,\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Listing ID \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Seller\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Type\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 213,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Status\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: displayTableDataNew\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tableList\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Used books for Sale\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Table, {\n            striped: true,\n            bordered: true,\n            hover: true,\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Listing ID \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Seller\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Type\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 236,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Status\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: displayTableDataUsed\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 13\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Table, {\n            striped: true,\n            bordered: true,\n            hover: true,\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Listing ID \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Seller\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 263,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Type\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 264,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 265,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Status\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Table, {\n            striped: true,\n            bordered: true,\n            hover: true,\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Listing ID \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 281,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Seller\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 283,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Type\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 284,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 285,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Status\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 286,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 13\n    }, this);\n  }\n};\n\n_s(BookListing, \"TIqcrMYruKcfZxY1C3sF1i85eq4=\");\n\n_c = BookListing;\n\nvar _c;\n\n$RefreshReg$(_c, \"BookListing\");","map":{"version":3,"sources":["/Users/hughphung/Documents/RMIT/2021/SEPT/SEPT-TEAM/SEPT-Team-6/code/FrontEnd/book-shop/src/components/Book/BookListing.js"],"names":["React","useState","axios","useParams","useEffect","Container","Table","BookListing","bookID","tableDataUsed","setTableDataUsed","tableDataNew","setTableDataNew","book","setBook","id","dataLoaded","setDataLoaded","listings","setListings","populateData","request","config","headers","Accept","withCredential","bookRequest","parseInt","console","log","response","post","data","listingRequest","bookId","error","fetchData","bookData","listingsData","results","dataNew","dataUsed","new","listing","listingItem","seller","type","price","sold","title","author","push","used","displayTableDataUsed","map","listItem","displayTableDataNew"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { useState } from 'react';\nimport axios from 'axios';\nimport { useParams } from 'react-router';\nimport { useEffect } from 'react';\nimport { Container, Table } from 'react-bootstrap';\nimport \"./BookListings.css\"\n\nexport const BookListing = ({bookID}) => {\n    const [tableDataUsed, setTableDataUsed] = useState([]);\n    const [tableDataNew, setTableDataNew] = useState([]);\n\n    const [book, setBook] = useState({id: 0});\n    const [dataLoaded, setDataLoaded] = useState(false);\n    const [listings, setListings] = useState();\n\n    const populateData = async (request) =>\n    {\n        try\n        {\n            const config = \n            {\n              headers: {\n                  Accept: 'application/json',\n                  'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin': '*',\n              },\n              withCredential: true\n            }\n\n            if (request === \"getBook\")\n            {\n                const bookRequest = {\n                    id:parseInt(bookID)\n                }\n    \n                console.log(\"Sending book request\")\n                const response = await axios.post(\"http://localhost:8081/api/books/getbook\", bookRequest, config);\n    \n                return response.data;\n            }\n\n            else if (request === \"getListings\")\n            {\n                const listingRequest = {\n                    bookId:parseInt(bookID)\n                }\n                    \n                console.log(\"Sending listings request\")\n                const response = await axios.post(\"http://localhost:8082/api/listings/getlistingsbybookid\", listingRequest, config);\n                console.log(\"Got listings\", response.data)\n                return response.data;\n            }\n\n        }  catch(error)\n        {\n            console.log(error)\n        }\n    }\n\n    useEffect(() => {\n        async function fetchData(){\n            if (dataLoaded === false) {\n                const bookData = await populateData(\"getBook\");\n                const listingsData = await populateData(\"getListings\");\n\n                if (listingsData && bookData)\n                {\n                    console.log(\"LISTINSGSOS\", listingsData)\n                    if (!listingsData.results && !bookData.results)\n                    {\n                        let dataNew = []\n                        let dataUsed = []\n\n                        if (listingsData.new)\n                        {\n                            for(const listing of listingsData.new){\n                                let listingItem = {\n                                    id:listing.id,\n                                    seller:listing.seller,\n                                    type:listing.type,\n                                    price:listing.price,\n                                    sold:listing.sold\n                                    \n                                }\n    \n                                if(listing.bookId === bookData.id){\n                                    listingItem = {\n                                        ...listingItem, \n                                        title:bookData.title,\n                                        author:bookData.author\n                                    }\n    \n                                    dataNew.push(listingItem)\n                                }\n    \n                            }\n                        }\n\n\n                        if (listingsData.used)\n                        {\n                            for(const listing of listingsData.used){\n                                let listingItem = {\n                                    id:listing.id,\n                                    seller:listing.seller,\n                                    type:listing.type,\n                                    price:listing.price,\n                                    sold:listing.sold\n                                    \n                                }\n    \n                                    if(listing.bookId === bookData.id){\n                                        listingItem = {\n                                            ...listingItem, \n                                            title:bookData.title,\n                                            author:bookData.author\n                                        }\n                                        dataUsed.push(listingItem)\n                                    }\n    \n                            }\n                        }\n\n\n                        console.log(\"asndjsabdad\", dataNew)\n\n                        setTableDataNew(dataNew); \n                        setTableDataUsed(dataUsed);  \n\n                        setDataLoaded(true)\n                    } \n                }\n                else\n                {\n                    setBook()\n                    setListings()\n                    setDataLoaded(true)\n                }\n            }\n        }\n        fetchData();\n\n    }, [dataLoaded, tableDataNew, tableDataUsed, listings, book])\n    if (tableDataUsed || tableDataNew)\n    {\n        const displayTableDataUsed = tableDataUsed.map(listItem => \n            {\n                return (\n                    \n                    <tr>\n                    <td>{listItem.id}</td>\n                    {/* <td>{listItem.title}</td> */}\n                    <td>{listItem.seller}</td>\n                    <td>{listItem.type}</td>\n                    <td>{listItem.price}</td>\n                    {\n                        listItem.sold\n                        ?\n                        (<div>\n                            Sold\n                        </div>)\n                        :\n                        (<div>\n                            Not sold\n                        </div>\n                        )\n                    }\n                    </tr>\n                )\n            }\n        )\n        const displayTableDataNew = tableDataNew.map(listItem => \n            {\n                return (\n                    \n                    <tr>\n                    <td>{listItem.id}</td>\n                    {/* <td>{listItem.title}</td> */}\n                    <td>{listItem.seller}</td>\n                    <td>{listItem.type}</td>\n                    <td>{listItem.price}</td>\n                    {\n                        listItem.sold\n                        ?\n                        (<div>\n                            Sold\n                        </div>)\n                        :\n                        (<div>\n                            Not sold\n                        </div>\n                        )\n                    }\n                    </tr>\n                )\n            })\n        \n        return (\n            <div>\n                <Container>\n                    <div className = 'tableList'>\n                        <h3>\n                            New Books for Sale\n                        </h3>\n                    <Table striped bordered hover>\n                        <thead>\n                            <tr>\n                            <th>Listing ID </th>\n                            {/* <th>Title</th> */}\n                            <th>Seller</th>\n                            <th>Type</th>\n                            <th>Price</th>\n                            <th>Status</th>\n\n                \n                            </tr>\n                        </thead>\n                        <tbody>\n                            {displayTableDataNew}\n                        </tbody>\n\n                    </Table>\n                    </div>\n                    <div className = 'tableList'>\n                        <h3>\n                            Used books for Sale\n                        </h3>\n                    <Table striped bordered hover>\n                        <thead>\n                            <tr>\n                            <th>Listing ID </th>\n                            {/* <th>Title</th> */}\n                            <th>Seller</th>\n                            <th>Type</th>\n                            <th>Price</th>\n                            <th>Status</th>\n\n                \n                            </tr>\n                        </thead>\n                        <tbody>\n                            {displayTableDataUsed}\n                        </tbody>\n\n                    </Table>\n                    </div>\n                </Container>\n            </div>\n        )\n    }\n    else\n    {\n        return (\n            <div>\n            <Container>\n                <div>\n                <Table striped bordered hover>\n                    <thead>\n                        <tr>\n                        <th>Listing ID </th>\n                        {/* <th>Title</th> */}\n                        <th>Seller</th>\n                        <th>Type</th>\n                        <th>Price</th>\n                        <th>Status</th>\n\n            \n                        </tr>\n                    </thead>\n                    <tbody>\n\n                    </tbody>\n\n                </Table>\n                </div>\n                <div>\n                <Table striped bordered hover>\n                        <thead>\n                            <tr>\n                            <th>Listing ID </th>\n                            {/* <th>Title</th> */}\n                            <th>Seller</th>\n                            <th>Type</th>\n                            <th>Price</th>\n                            <th>Status</th>\n\n                \n                            </tr>\n                        </thead>\n                        <tbody>\n                            \n                        </tbody>\n\n                    </Table>\n                </div>\n            </Container>\n        </div>\n        )\n    }\n\n}\n\n"]},"metadata":{},"sourceType":"module"}