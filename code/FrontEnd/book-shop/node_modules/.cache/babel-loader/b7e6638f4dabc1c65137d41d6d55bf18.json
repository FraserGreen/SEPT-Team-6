{"ast":null,"code":"var _jsxFileName = \"/Users/hughphung/Documents/RMIT/2021/SEPT/SEPT-TEAM/SEPT-Team-6/code/FrontEnd/book-shop/src/Context/SessionUserContext.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { SESSION_USER, USER_TYPE } from \"../components/constants\";\nimport { useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SessionUserContext = /*#__PURE__*/React.createContext(null);\nexport const SessionUserProvider = ({\n  children\n}) => {\n  _s();\n\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [userType, setUserType] = useState({\n    normal: false,\n    admin: false,\n    business: false\n  });\n  const [sessionUser, setSessionUser] = useState({\n    username: \"\"\n  });\n\n  const checkType = user => {\n    if (user.userType === \"admin\") {\n      setUserType({\n        normal: false,\n        admin: true,\n        business: false\n      });\n    } else if (user.userType === \"user\") {\n      setUserType({\n        normal: true,\n        admin: false,\n        business: false\n      });\n    } else if (user.userType === \"business\") {\n      setUserType({\n        normal: false,\n        admin: false,\n        business: true\n      });\n    }\n  };\n\n  const getLocalStorageSessionUser = () => {\n    const user = localStorage.getItem(SESSION_USER);\n\n    if (user) {\n      return JSON.parse(user);\n    }\n  };\n\n  useEffect(() => {\n    const user = getLocalStorageSessionUser();\n\n    if (user) {\n      setSessionUser(user);\n      checkType(user);\n      setLoggedIn(true);\n    }\n  }, [sessionUser.username]);\n\n  const loginSessionUser = user => {\n    localStorage.setItem(SESSION_USER, JSON.stringify(user)); // localStorage.setItem(USER_TYPE, user.userType);\n\n    setSessionUser(user);\n    setLoggedIn(true);\n    checkType(user);\n  };\n\n  const logoutSessionUser = () => {\n    localStorage.setItem(SESSION_USER, \"\");\n    setSessionUser({\n      username: \"\"\n    });\n    setLoggedIn(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(SessionUserContext.Provider, {\n    value: {\n      sessionUser,\n      loggedIn,\n      userType,\n      loginSessionUser,\n      logoutSessionUser\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 12\n  }, this);\n};\n\n_s(SessionUserProvider, \"3IGICj9d6BumCNqxvp9AiNTG890=\");\n\n_c = SessionUserProvider;\nexport default SessionUserContext;\n\nvar _c;\n\n$RefreshReg$(_c, \"SessionUserProvider\");","map":{"version":3,"sources":["/Users/hughphung/Documents/RMIT/2021/SEPT/SEPT-TEAM/SEPT-Team-6/code/FrontEnd/book-shop/src/Context/SessionUserContext.js"],"names":["React","useState","SESSION_USER","USER_TYPE","useEffect","SessionUserContext","createContext","SessionUserProvider","children","loggedIn","setLoggedIn","userType","setUserType","normal","admin","business","sessionUser","setSessionUser","username","checkType","user","getLocalStorageSessionUser","localStorage","getItem","JSON","parse","loginSessionUser","setItem","stringify","logoutSessionUser"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\"\nimport { SESSION_USER, USER_TYPE } from \"../components/constants\"\nimport { useEffect } from \"react\"\n\n\nconst SessionUserContext = React.createContext(null)\n\nexport const SessionUserProvider = ({children}) => {\n    const [loggedIn, setLoggedIn] = useState(false)\n    const [userType, setUserType] = useState(\n        {\n            normal:false,\n            admin:false,\n            business:false\n        }\n    );\n\n    const [sessionUser, setSessionUser] = useState({username:\"\"})\n    const checkType = (user) => {\n        if (user.userType === \"admin\")\n        {\n            setUserType({\n                normal:false,\n                admin:true,\n                business:false\n            });\n        }\n        else if (user.userType === \"user\")\n        {\n            setUserType({\n                normal:true,\n                admin:false,\n                business:false\n            });     \n        }\n\n        else if (user.userType === \"business\")\n        {\n            setUserType({\n                normal:false,\n                admin:false,\n                business:true\n            });     \n        }\n    }\n    const getLocalStorageSessionUser = () => {\n        const user = localStorage.getItem(SESSION_USER)\n        if (user)\n        {\n            return JSON.parse(user)\n        }\n    }\n\n    useEffect(() => {\n        const user = getLocalStorageSessionUser()\n        if (user)\n        {\n            setSessionUser(user)\n            checkType(user);\n            setLoggedIn(true)\n        }\n    }, [sessionUser.username])\n    \n\n    const loginSessionUser = (user) => {\n        localStorage.setItem(SESSION_USER, JSON.stringify(user));\n        // localStorage.setItem(USER_TYPE, user.userType);\n            \n        setSessionUser(user);\n        setLoggedIn(true)\n        checkType(user);\n\n\n    }\n\n    const logoutSessionUser = () => {\n        localStorage.setItem(SESSION_USER, \"\");\n        setSessionUser({username:\"\"})\n        setLoggedIn(false)\n    }\n\n    return <SessionUserContext.Provider value={{\n        sessionUser,\n        loggedIn,\n        userType,\n        loginSessionUser,\n        logoutSessionUser, \n        }}>\n        {children}\n    </SessionUserContext.Provider>\n}\n\nexport default SessionUserContext"]},"metadata":{},"sourceType":"module"}