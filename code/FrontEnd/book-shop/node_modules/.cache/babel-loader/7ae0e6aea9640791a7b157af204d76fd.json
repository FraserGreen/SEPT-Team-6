{"ast":null,"code":"var _jsxFileName = \"/Users/hughphung/Documents/RMIT/2021/SEPT/SEPT-TEAM/SEPT-Team-6/code/FrontEnd/book-shop/src/components/Search/Search.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useParams } from 'react-router';\nimport { useState } from 'react';\nimport { useEffect } from 'react';\nimport axios from 'axios';\nimport { Card, Row, Col, Container } from 'react-bootstrap';\nimport { useHistory } from 'react-router';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Search = () => {\n  _s();\n\n  const history = useHistory();\n  const {\n    searchInput\n  } = useParams();\n  const [books, setBooks] = useState();\n  const [searchType, setSearchType] = useState();\n\n  const changeURL = bookId => {\n    history.push(\"/book/\" + bookId);\n  };\n\n  const populateData = async () => {\n    try {\n      const config = {\n        headers: {\n          // Accept: 'application/json',\n          'Content-Type': 'application/json' // 'Access-Control-Allow-Origin': '*'\n\n        } // withCredentials:true\n\n      };\n      const searchRequest = {\n        searchTerm: String(searchInput)\n      };\n      console.log(\"Search:\", searchInput);\n      const responseGetData = await axios.post('http://localhost:8081/api/books/searchbooks', searchRequest, config);\n      console.log(\"Got search\", responseGetData);\n      return responseGetData.data;\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    console.log(\"useEffect\");\n\n    async function fetchData() {\n      console.log(\"fetch data\");\n      const bookData = await populateData();\n\n      if (!bookData.results) {\n        if (bookData.author) {\n          setSearchType(\"Authors\");\n          setBooks(bookData.author);\n        }\n\n        if (bookData.title) {\n          setSearchType(\"Titles\");\n          setBooks(bookData.title);\n        }\n\n        if (bookData.isbn) {\n          setSearchType(\"ISBN\");\n          setBooks(bookData.isbn);\n        }\n\n        if (bookData.genre) {\n          setSearchType(\"Genres\");\n          setBooks(bookData.genre);\n        }\n      } else {\n        setBooks();\n      }\n    }\n\n    fetchData();\n  }, [searchInput]);\n\n  if (books) {\n    const booksDisplay = books.map(book => {\n      return /*#__PURE__*/_jsxDEV(Col, {\n        md: \"auto\",\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          onClick: () => changeURL(book.id),\n          tag: \"a\",\n          style: {\n            width: '15rem',\n            height: '22rem',\n            maxHeight: '22rem',\n            cursor: 'pointer'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Card.Img, {\n            variant: \"top\",\n            src: book.imgURL,\n            style: {\n              height: '100%'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bookCardContent\",\n            children: /*#__PURE__*/_jsxDEV(Card.Body, {\n              children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bookCardTitle\",\n                  children: book.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 110,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bookPrice\",\n                  children: [\"$\", book.price]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 115,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }, this);\n    });\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        children: [/*#__PURE__*/_jsxDEV(Row, {\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: [\"Search results for: \\\"\", searchInput, \"\\\" found in \", searchType]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          children: booksDisplay\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: [\"No results found for '\", searchInput, \"'\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }, this);\n  }\n};\n\n_s(Search, \"56PN2s9gVsV4KzWmvFa25okRmhs=\", false, function () {\n  return [useHistory, useParams];\n});\n\n_c = Search;\n\nvar _c;\n\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"sources":["/Users/hughphung/Documents/RMIT/2021/SEPT/SEPT-TEAM/SEPT-Team-6/code/FrontEnd/book-shop/src/components/Search/Search.js"],"names":["React","useParams","useState","useEffect","axios","Card","Row","Col","Container","useHistory","Search","history","searchInput","books","setBooks","searchType","setSearchType","changeURL","bookId","push","populateData","config","headers","searchRequest","searchTerm","String","console","log","responseGetData","post","data","error","fetchData","bookData","results","author","title","isbn","genre","booksDisplay","map","book","id","width","height","maxHeight","cursor","imgURL","price"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { useParams } from 'react-router'\nimport { useState } from 'react';\nimport { useEffect } from 'react';\nimport axios from 'axios';\nimport { Card, Row, Col, Container} from 'react-bootstrap'\nimport { useHistory } from 'react-router';\n\nexport const Search = () => {\n\n    const history = useHistory();\n\n    const {searchInput} = useParams();\n\n    const[books, setBooks] = useState();\n    const[searchType, setSearchType] = useState()\n\n\n    const changeURL = (bookId) => {\n\n        history.push(\"/book/\"+ bookId)\n    }\n\n    const populateData = async () => \n    {\n\n        try\n        {\n            const config = \n            {\n                headers: {\n                    // Accept: 'application/json',\n                    'Content-Type': 'application/json',\n                    // 'Access-Control-Allow-Origin': '*'\n                },\n                // withCredentials:true\n            }\n\n            const searchRequest = {\n                searchTerm:String(searchInput)\n            }\n            console.log(\"Search:\", searchInput)\n            const responseGetData = await axios.post('http://localhost:8081/api/books/searchbooks', searchRequest, config);\n            console.log(\"Got search\", responseGetData)\n\n            return responseGetData.data;\n        }\n        catch(error)\n        {\n            console.log(error);\n        }\n    }\n\n    useEffect(() => {\n        console.log(\"useEffect\")\n        async function fetchData() {\n            console.log(\"fetch data\")\n            const bookData = await populateData();\n            if (!bookData.results)\n            {\n                if (bookData.author)\n                {\n                    setSearchType(\"Authors\")\n                    setBooks(bookData.author)\n                }\n\n                if (bookData.title)\n                {\n                    setSearchType(\"Titles\")\n                    setBooks(bookData.title)\n                }\n                \n                if (bookData.isbn)\n                {\n                    setSearchType(\"ISBN\")\n\n                    setBooks(bookData.isbn)\n                }\n\n                if (bookData.genre)\n                {\n                    setSearchType(\"Genres\")\n\n                    setBooks(bookData.genre)\n                }\n\n\n            }\n            else\n            {\n                setBooks()\n            }\n        }\n\n        fetchData();\n    }, [searchInput])\n\n    if (books)\n    {\n        const booksDisplay = books.map(book => \n            {\n                return (\n                    <Col md='auto'>\n                        <Card onClick={() => changeURL(book.id)} tag='a' style={{ width: '15rem', height:'22rem', maxHeight:'22rem', cursor:'pointer'}} >\n                            <Card.Img variant=\"top\" src={book.imgURL} style={{height:'100%'}} />\n                                <div className='bookCardContent'>\n\n                                    <Card.Body>\n                                        <Card.Title>\n                                            <div className='bookCardTitle'>\n                                            {book.title}\n                                            </div>\n                                        </Card.Title>\n                                        <Card.Text>\n                                            <div className='bookPrice'>\n                                                ${book.price}\n                                            </div>\n                                        </Card.Text>\n                                    </Card.Body>\n                                </div>\n\n                        </Card>\n                </Col>\n                )\n            }\n        )\n\n        return (\n            <div>\n                <Container>\n                    <Row>\n                        <h1>\n                            Search results for: \"{searchInput}\" found in {searchType}\n                        </h1>\n                    </Row>\n                    <br/>\n                    <Row>\n                        {booksDisplay}\n                    </Row>\n                </Container>\n            </div>\n        )\n    }\n    else\n    {\n        return (\n            <div>\n                <Container>\n                <h1>\n                    No results found for '{searchInput}'\n                </h1>\n                <br/>\n\n                </Container>\n            </div>\n        )\n    }\n\n}\n"]},"metadata":{},"sourceType":"module"}